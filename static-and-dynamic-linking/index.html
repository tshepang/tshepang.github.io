<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>Tshepang logs - static and dynamic linking</title>

      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
      

      
          <link rel="stylesheet" href="https://tshepang.github.io/site.css">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">Tshepang logs</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;about-me">
                            about
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;tags">
                            tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;categories&#x2F;movies">
                            movies
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;tshepang.github.io">Tshepang logs</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;about-me">
                                    about
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;tags">
                                    tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;categories&#x2F;movies">
                                    movies
                                </a>
                            </li>
                        
                    </ul>
                    
                    <div class="search-container">
                      <input id="search" type="search" placeholder="ðŸ”Ž  search">
                      <div class="search-results">
                        <div class="search-results__items"></div>
                      </div>
                    </div>
                    
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    



<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;static-and-dynamic-linking&#x2F;">static and dynamic linking</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2022-07-26</span>
            
        </div>
    </header>

    <div class="post-content">
      <p><em>Let us simplify the model by assuming there is an executable (exe)
and a single dependency (dep)</em></p>
<p>For a language that lacks ABI (such as Rust),
the challenge with dynamic linking is that new versions of
a dep will require rebuilding the exe,
unless multiple versions of the dep are kept around
(which defeats the point of dynamic linking).
That flaw does not affect the exe that has static linking,
since they have all they need embedded in them.</p>
<p>Beyond that, dynamic linking has clear wins...</p>
<ul>
<li>
<p>where a change does <strong>not</strong> require a new toolchain:</p>
<table><thead><tr><th>change</th><th>static linking</th><th>dynamic linking</th></tr></thead><tbody>
<tr><td>dep</td><td>rebuild all, relink</td><td>rebuild</td></tr>
<tr><td>exe</td><td>rebuild, relink</td><td>rebuild</td></tr>
</tbody></table>
</li>
<li>
<p>where a change requires a new toolchain:</p>
<table><thead><tr><th>change</th><th>static linking</th><th>dynamic linking</th></tr></thead><tbody>
<tr><td>dep</td><td>rebuild all, relink</td><td>rebuild all</td></tr>
<tr><td>exe</td><td>rebuild all, relink</td><td>rebuild all</td></tr>
</tbody></table>
</li>
</ul>
<p>It's not an easy trade, so actual numbers would help.
Assuming there are no other problems related to dynamic linking,
there are two alternatives:</p>
<ul>
<li>The dep and exe is rebuilt each time a new toolchain is released,
to benefit from possible improvements such better codegen.</li>
<li>Toolchain releases do not result in any (automatic) rebuilds,
unless there are changes in either the dep or the exe.
This seems reasonable,
and has no disadvantages compared to static linking.</li>
</ul>

    </div>

    
    

    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https://tshepang.github.io/tags/rust/">#Rust</a>
                    
                </div>
            
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      
          <script type="text/javascript" src="https://tshepang.github.io/even.js" ></script>
          
          <script type="text/javascript" src="https://tshepang.github.io/elasticlunr.min.js"></script>
          <script type="text/javascript" src="https://tshepang.github.io/search_index.en.js"></script>
          <script type="text/javascript" src="https://tshepang.github.io/search.js"></script>
          
      
    </body>

</html>
