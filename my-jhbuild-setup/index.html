<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="alternate" type="application/atom+xml" title="Atom/RSS Feed" href="https://tshepang.github.io/atom.xml" />
  <meta name="robots" content="index, follow" />
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <title>my JHBuild setup | Tshepang logs</title>
  <meta name="copyright" content="Tshepang logs" />
  <meta name="description" content="" />
  <link rel="canonical" href="https://tshepang.github.io/my-jhbuild-setup/" />
  <meta name="keywords" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <noscript><link rel="stylesheet" href="https://tshepang.github.io/nojs.css" /></noscript>
</head>
<body>
  <header>
    <nav>
      <div><h1><a href="https://tshepang.github.io/">Tshepang logs</a></h1></div>
      <div>
        <ul><li> <h2><a href="https://tshepang.github.io/about-me">about</a></h2> </li><li> <h2><a href="https://tshepang.github.io/tags">tags</a></h2> </li><li> <h2><a href="https://tshepang.github.io/categories/movies">movies</a></h2> </li></ul>
      </div>
      <div>
        <form class="js" name="goSearch">
          <div class="searchd">
            <input id="userinput" type="text" placeholder="Search" autocomplete="off" title="Search" />
            <button type="submit" title="Search"><span class="si">&#8981;</span></button>
          </div>
          <div><div id="suggestions"></div></div>
        </form>
      </div>
    </nav>
  </header>
  <main>
    <article>
        <h1><a href="https://tshepang.github.io/my-jhbuild-setup/">my JHBuild setup</a></h1>

    <p>JHBuild is a <a href="http://library.gnome.org/devel/jhbuild/unstable/command-reference.html.en">powerful</a> and <a href="http://library.gnome.org/devel/jhbuild/unstable/config-reference.html.en">flexible</a> build tool for GNOME. It does
takes some getting used to in terms of set-up, but this <a href="http://live.gnome.org/Jhbuild">wiki page</a> is
quite gentle, and it details how to get the code running on your
machine.</p>
<p>If you use Debian (or Ubuntu), you can use run this command:</p>
<pre data-lang="sh" class="language-sh z-code"><code class="language-sh" data-lang="sh"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">wajig</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>norecommends</span> install build-essential docbook-xsl flex</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">bison</span></span><span class="z-meta z-function-call z-arguments z-shell"> cvs gperf cmake  <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>uuid<span class="z-punctuation z-separator z-shell">,</span>ppp<span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span>-dev</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">libx{composite,randr,damage,ft2,i,t</span></span><span class="z-meta z-function-call z-shell"></span>}<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">-dev</span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">libxcb-{event1,aux0,atom1</span></span><span class="z-meta z-function-call z-shell"></span>}<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">-dev</span></span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">lib{pam0g,iw,db,gdbm,png12,ffi,tiff,vorbis,gl1-mesa,unistring</span></span><span class="z-meta z-function-call z-shell"></span>}
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">lib{quvi,icu,neon27,usb-1.0-0,asound2,ncurses5,udev,usb,acl1</span></span><span class="z-meta z-function-call z-shell"></span>}
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">lib{boost-signals,ldap2,sasl2</span></span><span class="z-meta z-function-call z-shell"></span>}<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">-dev</span></span>
</span></code></pre>
<p>It's installs the development packages that will be needed by the build
process. The <code>--no-recommends</code> option means I want to limit the
installation to packages I really need, avoiding the extra stuff deemed
by the packager to be useful for me.</p>
<p>My &quot;~/.jhbuilrc&quot; contains the following:</p>
<pre data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> build directory
</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">checkoutroot</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">os</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-meta z-generic-name z-python">path</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">expanduser</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">~/src/gnome<span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>

<span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> don&#39;t spew lots of distracting status messages
</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">notrayicon</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-constant z-language z-python">True</span>

<span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> attempt to build modules even if their dependencies weren&#39;t successfully built
</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">nopoison</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-constant z-language z-python">True</span>

<span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> don&#39;t build these since they have issues; this implies that I must install my distro&#39;s development versions
</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">skip</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-sequence z-list z-python"><span class="z-punctuation z-section z-sequence z-begin z-python">[</span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-single z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&#39;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-single z-python">nss<span class="z-punctuation z-definition z-string z-end z-python">&#39;</span></span></span><span class="z-punctuation z-separator z-sequence z-python">,</span> <span class="z-meta z-string z-python"><span class="z-string z-quoted z-single z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&#39;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-single z-python">nspr<span class="z-punctuation z-definition z-string z-end z-python">&#39;</span></span></span><span class="z-punctuation z-section z-sequence z-end z-python">]</span></span>

<span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> dont fetch moduleset xml files from the web; use ones that are installed locally
</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">use_local_modulesets</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-constant z-language z-python">True</span>

<span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> where html-formatted logs are kept
</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">tinderbox_outputdir</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">os</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-meta z-generic-name z-python">path</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">expanduser</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">~/temp/tinderbox<span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span></code></pre>
<p>See <a href="http://library.gnome.org/devel/jhbuild/unstable/config-reference.html.en">Configuration File Reference</a> for a detailed explanation
of these options.</p>
<p>After this, I run <code>jhbuild bootstrap --ignore-system</code>. This downloads,
builds, and installs the basic tools for building packages (here's <a href="http://git.gnome.org/browse/jhbuild/tree/modulesets/bootstrap.modules">the
xml file</a> it uses to determine what these tools are, and where it
downloads them from). To avoid issues with some incompatibility with my
OS, I use <code>--ignore-system</code>, which ensures that the bootstrap command
will use the blessed versions of these tools.</p>
<p>When the bootstrap process is complete, I run the not-so-descriptive
command <code>jhbuild tinderbox</code> (See Command Reference for a detailed
explanation of this and the other options). This is the same as build,
except that the output is stored in html files, in a directory specified
by <strong>tinderbox_outputdir</strong> in the config file.</p>
<p>Ideally, some hours later, the process should be complete. Reaching for
&quot;~/temp/tinderbox&quot; will present you with a whole bunch of html files,
one for each module. The file &quot;index.html&quot; will give a decent page
that acts like a summary of the entire build process, showing which
modules failed, and on what build stages. Gorgeous!</p>
<hr />
<p><strong>sidenotes</strong>:</p>
<ul>
<li>This process is rather simplified, for the sake of clarity.</li>
<li>I run Debian 6, codenamed Squeeze.</li>
<li>There is <a href="http://www.vuntz.net/journal/post/2010/09/23/My-love-for-jhbuild">a more thorough tutorial</a> elsewhere.</li>
</ul>

<p><b><a href="#">Back to top</a></b></p>
    </article>
  </main>
  <footer>
    <div class="c">
      <nav>
        <ul><li><a href="https://tshepang.github.io/atom.xml" target="_blank" title="Atom/RSS Feed"><i type="Button" class="svg rss" title="Atom/RSS Feed"></i></a></li><li><a href="mailto:tshepang@gmail.com" target="_blank" title="Mail"><i type="Button" class="svg mail" title="Mail"></i></a></li><li><a href="https://twitter.com/tshepang_dev/" target="_blank" title="Twitter"><i type="Button" class="svg twitter" title="Twitter"></i></a></li><li><a href="https://github.com/tshepang/" target="_blank" title="Github"><i type="Button" class="svg github" title="Github"></i></a></li></ul>
      </nav>
      <p>Copyright &copy; 2022 Tshepang logs</p>
      <nav>
        <ul><li> <a href="https://tshepang.github.io/about-me"> about </a> </li></ul>
      </nav>
      <p>Powered by <a href="https://www.getzola.org/">Zola</a> and <a href="https://github.com/jieiku/abridge/">Abridge</a></p>
    </div>
  </footer>
<span class="topout">
<span class="topleft"> </span><a href="#" class="top" title="Back to Top">&cuwed;</a>
</span>
</body>
</html>