<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>Tshepang logs - Rust 2.0 wishlist</title>

      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
      

      
          <link rel="stylesheet" href="https://tshepang.github.io/site.css">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">Tshepang logs</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;about-me">
                            about
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;tags">
                            tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;categories&#x2F;movies">
                            movies
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;tshepang.github.io">Tshepang logs</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;about-me">
                                    about
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;tags">
                                    tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;categories&#x2F;movies">
                                    movies
                                </a>
                            </li>
                        
                    </ul>
                    
                    <div class="search-container">
                      <input id="search" type="search" placeholder="ðŸ”Ž  search">
                      <div class="search-results">
                        <div class="search-results__items"></div>
                      </div>
                    </div>
                    
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    


<div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content always-active">
        <nav id="TableOfContents">
            <ul>
                
                <li>
                    <a href="https://tshepang.github.io/rust-2-0-wishlist/#lang" class="toc-link">lang</a>
                    
                </li>
                
                <li>
                    <a href="https://tshepang.github.io/rust-2-0-wishlist/#std" class="toc-link">std</a>
                    
                </li>
                
                <li>
                    <a href="https://tshepang.github.io/rust-2-0-wishlist/#cargo" class="toc-link">cargo</a>
                    
                </li>
                
            </ul>
        </nav>
    </div>
</div>


<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;tshepang.github.io&#x2F;rust-2-0-wishlist&#x2F;">Rust 2.0 wishlist</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2022-06-25</span>
            
        </div>
    </header>

    <div class="post-content">
      <p>There is a strong commitment for Rust not to break backwards compatibility,
meaning that all code that compiled with Rust v1.0 should compile with all
future Rust versions, all but for exceptional circumstances.
The effort is commendable, and results in kool things like <a href="https://doc.rust-lang.org/edition-guide/editions">Editions</a>,
but mistakes/cruft/poor choices are bound to happen that cannot be fixed with such.
That is, I wish we will have a breaking release at some point,
and the pain of such a breaking change could be relieved/eliminated with
planning and migration tooling.</p>
<p>That said,
following are my favorite breaking things I want in Rust.</p>
<h3 id="lang">lang</h3>
<ul>
<li>
<p>Assigning values to struct bindings should use the equal sign, not
the colon:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#65737e;">// now
</span><span>Shoe { size: </span><span style="color:#d08770;">10</span><span>, style: &quot;</span><span style="color:#a3be8c;">sneaker</span><span>&quot; };
</span><span style="color:#65737e;">// dream
</span><span>Shoe { size = </span><span style="color:#d08770;">10</span><span>, style = &quot;</span><span style="color:#a3be8c;">sneaker</span><span>&quot; };
</span></code></pre>
<p>This would be consistent with the rest of the language.</p>
</li>
</ul>
<h3 id="std">std</h3>
<ul>
<li>
<p>All collections types removed, except these basic ones: Vec,
HashMap, and HashSet. Also, they would also be available from
top-level (i.e. <code>std::{Vec, HashMap, HashSet}</code>), resulting in
<code>std::collections</code> removal.</p>
</li>
<li>
<p>Rename <code>Vec</code> to <code>Array</code>, a more clear/obvious name.
An alternative is <code>List</code>, but that type in Python accepts members of
different types, which is not the case for <code>Vec</code>.</p>
</li>
<li>
<p>Consistent names for string-y types:</p>
<table><thead><tr><th></th><th>current</th><th>wish</th></tr></thead><tbody>
<tr><td>string</td><td>str</td><td>Str</td></tr>
<tr><td></td><td>String</td><td>StrOwned</td></tr>
<tr><td>os string</td><td>OsStr</td><td>OsStr (same)</td></tr>
<tr><td></td><td>OsString</td><td>OsStrOwned</td></tr>
<tr><td>C string</td><td>CStr</td><td>CStr (same)</td></tr>
<tr><td></td><td>CString</td><td>CStrOwned</td></tr>
<tr><td>fs path</td><td>Path</td><td>Path (same)</td></tr>
<tr><td></td><td>PathBuf</td><td>PathOwned</td></tr>
</tbody></table>
<p>Not exactly happy with above, but much better than the current 'mess'</p>
</li>
<li>
<p>Remove <code>std::sync::mpsc</code> from stdlib, making it available
externally... it does not feel general enough. (<a href="https://github.com/rust-lang/rust/pull/42397#issuecomment-315867774">more issues</a>)</p>
</li>
<li>
<p>Remove per-type methods where trait impls offer same functionality,
for generality</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#65737e;">// remove
</span><span>PathBuf::as_path
</span><span style="color:#65737e;">// ... in favor of
</span><span>PathBuf::as_ref
</span><span>
</span><span style="color:#65737e;">// remove
</span><span>Path::to_path_buf
</span><span style="color:#65737e;">// ... in favor of
</span><span>Path::to_owned
</span></code></pre>
</li>
<li>
<p>Remove all deprecated APIs, most notable being the <code>try!</code> macro</p>
</li>
</ul>
<h3 id="cargo">cargo</h3>
<ul>
<li>
<p>Do not allow crate names with underscores, because taste...</p>
<p><code>serde_json</code> (bad)</p>
<p><code>serde-json</code> (good)</p>
</li>
</ul>

    </div>

    
    

    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https://tshepang.github.io/tags/rust/">#Rust</a>
                    
                </div>
            
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      
          <script type="text/javascript" src="https://tshepang.github.io/even.js" ></script>
          
          <script type="text/javascript" src="https://tshepang.github.io/elasticlunr.min.js"></script>
          <script type="text/javascript" src="https://tshepang.github.io/search_index.en.js"></script>
          <script type="text/javascript" src="https://tshepang.github.io/search.js"></script>
          
      
    </body>

</html>
