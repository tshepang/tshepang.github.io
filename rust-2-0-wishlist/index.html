<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="alternate" type="application/atom+xml" title="Atom/RSS Feed" href="https://tshepang.github.io/atom.xml" />
  <meta name="robots" content="index, follow" />
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <title>Rust 2.0 wishlist | Tshepang logs</title>
  <meta name="copyright" content="Tshepang logs" />
  <meta name="description" content="" />
  <link rel="canonical" href="https://tshepang.github.io/rust-2-0-wishlist/" />
  <meta name="keywords" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <noscript><link rel="stylesheet" href="https://tshepang.github.io/nojs.css" /></noscript>
</head>
<body>
  <header>
    <nav>
      <div><h1><a href="https://tshepang.github.io/">Tshepang logs</a></h1></div>
      <div>
        <ul><li> <h2><a href="https://tshepang.github.io/about-me">about</a></h2> </li><li> <h2><a href="https://tshepang.github.io/tags">tags</a></h2> </li><li> <h2><a href="https://tshepang.github.io/categories/movies">movies</a></h2> </li></ul>
      </div>
      <div>
        <form class="js" name="goSearch">
          <div class="searchd">
            <input id="userinput" type="text" placeholder="Search" autocomplete="off" title="Search" />
            <button type="submit" title="Search"><span class="si">&#8981;</span></button>
          </div>
          <div><div id="suggestions"></div></div>
        </form>
      </div>
    </nav>
  </header>
  <main>
    <article>
        <h1><a href="https://tshepang.github.io/rust-2-0-wishlist/">Rust 2.0 wishlist</a></h1>

    <p>There is a strong commitment for Rust not to break backwards compatibility,
meaning that all code that compiled with Rust v1.0 should compile with all
future Rust versions, all but for exceptional circumstances.
The effort is commendable, and results in kool things like <a href="https://doc.rust-lang.org/edition-guide/editions">Editions</a>,
but mistakes/cruft/poor choices are bound to happen that cannot be fixed with such.
That is, I wish we will have a breaking release at some point,
and the pain of such a breaking change could be relieved/eliminated with
planning and migration tooling.</p>
<p>That said,
following are my favorite breaking things I want in Rust.</p>
<h3 id="lang">lang</h3>
<ul>
<li>
<p>Assigning values to struct bindings should use the equal sign, not
the colon:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> now
</span>Shoe <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> size<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">10</span><span class="z-punctuation z-separator z-rust">,</span> style<span class="z-punctuation z-separator z-rust">:</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>sneaker<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
<span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> dream
</span>Shoe <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> size <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">10</span><span class="z-punctuation z-separator z-rust">,</span> style <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>sneaker<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>This would be consistent with the rest of the language.</p>
</li>
</ul>
<h3 id="std">std</h3>
<ul>
<li>
<p>All collections types removed, except these basic ones: Vec,
HashMap, and HashSet. Also, they would also be available from
top-level (i.e. <code>std::{Vec, HashMap, HashSet}</code>), resulting in
<code>std::collections</code> removal.</p>
</li>
<li>
<p>Rename <code>Vec</code> to <code>Array</code>, a more clear/obvious name.
An alternative is <code>List</code>, but that type in Python accepts members of
different types, which is not the case for <code>Vec</code>.</p>
</li>
<li>
<p>Consistent names for string-y types:</p>
<table><thead><tr><th></th><th>current</th><th>wish</th></tr></thead><tbody>
<tr><td>string</td><td>str</td><td>Str</td></tr>
<tr><td></td><td>String</td><td>StrOwned</td></tr>
<tr><td>os string</td><td>OsStr</td><td>OsStr (same)</td></tr>
<tr><td></td><td>OsString</td><td>OsStrOwned</td></tr>
<tr><td>C string</td><td>CStr</td><td>CStr (same)</td></tr>
<tr><td></td><td>CString</td><td>CStrOwned</td></tr>
<tr><td>fs path</td><td>Path</td><td>Path (same)</td></tr>
<tr><td></td><td>PathBuf</td><td>PathOwned</td></tr>
</tbody></table>
<p>Not exactly happy with above, but much better than the current 'mess'</p>
</li>
<li>
<p>Remove <code>std::sync::mpsc</code> from stdlib, making it available
externally... it does not feel general enough. (<a href="https://github.com/rust-lang/rust/pull/42397#issuecomment-315867774">more issues</a>)</p>
</li>
<li>
<p>Remove per-type methods where trait impls offer same functionality,
for generality</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> remove
</span><span class="z-meta z-path z-rust">PathBuf<span class="z-punctuation z-accessor z-rust">::</span></span>as_path
<span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ... in favor of
</span><span class="z-meta z-path z-rust">PathBuf<span class="z-punctuation z-accessor z-rust">::</span></span>as_ref

<span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> remove
</span><span class="z-meta z-path z-rust">Path<span class="z-punctuation z-accessor z-rust">::</span></span>to_path_buf
<span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ... in favor of
</span><span class="z-meta z-path z-rust">Path<span class="z-punctuation z-accessor z-rust">::</span></span>to_owned
</span></code></pre>
</li>
<li>
<p>Remove all deprecated APIs, most notable being the <code>try!</code> macro</p>
</li>
</ul>
<h3 id="cargo">cargo</h3>
<ul>
<li>
<p>Do not allow crate names with underscores, because taste...</p>
<p><code>serde_json</code> (bad)</p>
<p><code>serde-json</code> (good)</p>
</li>
</ul>

<p><b><a href="#">Back to top</a></b></p>
    </article>
  </main>
  <footer>
    <div class="c">
      <nav>
        <ul><li><a href="https://tshepang.github.io/atom.xml" target="_blank" title="Atom/RSS Feed"><i type="Button" class="svg rss" title="Atom/RSS Feed"></i></a></li><li><a href="mailto:tshepang@gmail.com" target="_blank" title="Mail"><i type="Button" class="svg mail" title="Mail"></i></a></li><li><a href="https://twitter.com/tshepang_dev/" target="_blank" title="Twitter"><i type="Button" class="svg twitter" title="Twitter"></i></a></li><li><a href="https://github.com/tshepang/" target="_blank" title="Github"><i type="Button" class="svg github" title="Github"></i></a></li></ul>
      </nav>
      <p>Copyright &copy; 2022 Tshepang logs</p>
      <nav>
        <ul><li> <a href="https://tshepang.github.io/about-me"> about </a> </li></ul>
      </nav>
      <p>Powered by <a href="https://www.getzola.org/">Zola</a> and <a href="https://github.com/jieiku/abridge/">Abridge</a></p>
    </div>
  </footer>
<span class="topout">
<span class="topleft"> </span><a href="#" class="top" title="Back to Top">&cuwed;</a>
</span>
</body>
</html>