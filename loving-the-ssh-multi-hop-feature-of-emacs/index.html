<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="alternate" type="application/atom+xml" title="Atom/RSS Feed" href="https://tshepang.github.io/atom.xml" />
  <meta name="robots" content="index, follow" />
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <title>loving the SSH multi-hop feature of Emacs | Tshepang logs</title>
  <meta name="copyright" content="Tshepang logs" />
  <meta name="description" content="" />
  <link rel="canonical" href="https://tshepang.github.io/loving-the-ssh-multi-hop-feature-of-emacs/" />
  <meta name="keywords" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <noscript><link rel="stylesheet" href="https://tshepang.github.io/nojs.css" /></noscript>
</head>
<body>
  <header>
    <nav>
      <div><h1><a href="https://tshepang.github.io/">Tshepang logs</a></h1></div>
      <div>
        <ul><li> <h2><a href="https://tshepang.github.io/about-me">about</a></h2> </li><li> <h2><a href="https://tshepang.github.io/tags">tags</a></h2> </li><li> <h2><a href="https://tshepang.github.io/categories/movies">movies</a></h2> </li></ul>
      </div>
      <div>
        <form class="js" name="goSearch">
          <div class="searchd">
            <input id="userinput" type="text" placeholder="Search" autocomplete="off" title="Search" />
            <button type="submit" title="Search"><span class="si">&#8981;</span></button>
          </div>
          <div><div id="suggestions"></div></div>
        </form>
      </div>
    </nav>
  </header>
  <main>
    <article>
        <h1><a href="https://tshepang.github.io/loving-the-ssh-multi-hop-feature-of-emacs/">loving the SSH multi-hop feature of Emacs</a></h1>

    <p>I'm at home and want to access some system at work. I cannot access
this system directly, so will have to use a VPN or sshfs, but I don't
know how to set VPN up and sshfs feels rather clunky (I first have to
have some directory I'm going to mount the thing, and have to remember
the command line syntax). With Emacs, I run the following command:</p>
<pre class="z-code"><code><span class="z-text z-plain">C-x C-f /ssh:work|ssh:10.0.0.107|ssh:10.0.0.148:~/some/files/
</span></code></pre>
<p>What happens there is I ask Emacs to run <code>find-file</code>, which opens its
file manager, <strong>Dired</strong>. It first accesses the server at work, then my
work desktop (<code>10.0.0.107</code>), and then some machine (<code>10.0.0.148</code>) which
I normally access via my work desktop (it got SSH keys). Finally, I'm
then presented with the view of the files in <code>~/some/files/</code> in that
machine, which I can work on (view, edit, save) like any local file. I
was surprised such a feature exists, thinking I'd have to do ugly
things like port forwarding. I do use the single hop a lot (if that's
even the right name):</p>
<pre class="z-code"><code><span class="z-text z-plain">C-x C-f /ssh:work:~/some/files/
</span></code></pre>
<p>Shortcut for that is:</p>
<pre class="z-code"><code><span class="z-text z-plain">C-x C-f /work:~/some/files/
</span></code></pre>
<p><strong>sidenotes</strong>:</p>
<ul>
<li>
<p>The shortcut doesn't work with multi-hop</p>
</li>
<li>
<p>I love the fact that Emacs accepts SSH settings, where for example,
instead of specifying the whole <a href="mailto:username@host">username@host</a>, it accepts the
aliases in <code>~/.ssh/config</code>, such that I only have to run:</p>
<pre class="z-code"><code><span class="z-text z-plain">ssh work
</span></code></pre>
<p>instead of:</p>
<pre class="z-code"><code><span class="z-text z-plain">ssh tshepang@hostname
</span></code></pre>
</li>
</ul>

<p><b><a href="#">Back to top</a></b></p>
    </article>
  </main>
  <footer>
    <div class="c">
      <nav>
        <ul><li><a href="https://tshepang.github.io/atom.xml" target="_blank" title="Atom/RSS Feed"><i type="Button" class="svg rss" title="Atom/RSS Feed"></i></a></li><li><a href="mailto:tshepang@gmail.com" target="_blank" title="Mail"><i type="Button" class="svg mail" title="Mail"></i></a></li><li><a href="https://twitter.com/tshepang_dev/" target="_blank" title="Twitter"><i type="Button" class="svg twitter" title="Twitter"></i></a></li><li><a href="https://github.com/tshepang/" target="_blank" title="Github"><i type="Button" class="svg github" title="Github"></i></a></li></ul>
      </nav>
      <p>Copyright &copy; 2022 Tshepang logs</p>
      <nav>
        <ul><li> <a href="https://tshepang.github.io/about-me"> about </a> </li></ul>
      </nav>
      <p>Powered by <a href="https://www.getzola.org/">Zola</a> and <a href="https://github.com/jieiku/abridge/">Abridge</a></p>
    </div>
  </footer>
<span class="topout">
<span class="topleft"> </span><a href="#" class="top" title="Back to Top">&cuwed;</a>
</span>
</body>
</html>